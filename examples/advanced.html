<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>ContentDisplayer Demo</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: system-ui, -apple-system, sans-serif;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        line-height: 1.6;
      }

      .demo-section {
        margin-bottom: 40px;
        padding: 20px;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
      }

      h2 {
        color: #2c3e50;
      }

      button {
        padding: 8px 16px;
        margin: 4px;
        border: 1px solid #3498db;
        background: white;
        color: #3498db;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.3s;
      }

      button:hover {
        background: #3498db;
        color: white;
      }

      .content-wrapper {
        display: none;
        background: white;
        border-radius: 4px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .content-wrapper.visible {
        display: block; /* Show when visible */
        opacity: 1;
        visibility: visible;
      }

      .content-wrapper.modal.visible,
      .content-wrapper.lightbox.visible,
      .content-wrapper.drawer.visible {
        display: flex; /* These need flex display when visible */
      }

      /* Mode Modal */
      .content-wrapper.modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }

      /* Mode Lightbox spécifique */
      .content-wrapper.lightbox {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }

      /* Modal */
      .content-mode-modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 1000;
        background: rgba(255, 255, 255, 0.95);
        padding: 20px;
        max-width: 500px;
        width: 90%;
      }

      /* Drawer */
      .content-mode-drawer {
        position: fixed;
        top: 0;
        right: 0;
        height: 100%;
        width: 300px;
        background: white;
        z-index: 1000;
        padding: 20px;
      }

      /* Tooltip & Popover */
      .content-mode-tooltip .content-container,
      .content-mode-popover .content-container {
        padding: 8px 12px;
        background: #2c3e50;
        color: white;
        border-radius: 4px;
      }

      /* Dropdown */
      .content-mode-dropdown {
        position: absolute;
        background: white;
        min-width: 200px;
        border: 1px solid #e0e0e0;
      }

      /* Accordion */
      .content-mode-accordion {
        border-top: 1px solid #e0e0e0;
      }

      /* Lightbox */
      .content-mode-lightbox {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .lightbox-container img {
        max-width: 90%;
        max-height: 90vh;
      }

      .content-close {
        position: absolute;
        right: 10px;
        top: 10px;
        background: none;
        border: none;
        color: #666;
        font-size: 24px;
        cursor: pointer;
      }

      .content-close::before {
        content: "×";
      }

      .demo-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
        margin: 20px 0;
      }

      .demo-card {
        padding: 15px;
        border: 1px solid #e0e0e0;
        border-radius: 4px;
        text-align: center;
      }

      /* Supprimer ou remplacer .content-mode-lightbox par : */
      .content-wrapper.content-mode-lightbox {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 1000;
        display: none; /* Important: commencer caché */
      }

      .content-wrapper.content-mode-lightbox.visible {
        display: flex;
        align-items: center;
        justify-content: center;
      }
    </style>
  </head>
  <body>
    <h1>ContentDisplayer Demo</h1>

    <div class="demo-section">
      <h2>Modal</h2>
      <button
        data-content-trigger
        data-content-mode="modal"
        data-content-source="<h3>Modal Example</h3><p>This is a modal dialog box that appears in the center of the screen.</p>"
      >
        Open Modal
      </button>
    </div>

    <div class="demo-section">
      <h2>Drawer</h2>
      <button
        data-content-trigger
        data-content-mode="drawer"
        data-content-source="<h3>Drawer Example</h3><p>This is a drawer that slides in from the right side of the screen.</p>"
      >
        Open Drawer
      </button>
    </div>

    <div class="demo-section">
      <h2>Tooltips</h2>
      <div class="demo-grid">
        <button
          data-content-trigger
          data-content-mode="tooltip"
          data-content-position="top"
          data-content-source="Tooltip on top"
        >
          Hover (Top)
        </button>
        <button
          data-content-trigger
          data-content-mode="tooltip"
          data-content-position="bottom"
          data-content-source="Tooltip on bottom"
        >
          Hover (Bottom)
        </button>
        <button
          data-content-trigger
          data-content-mode="tooltip"
          data-content-position="left"
          data-content-source="Tooltip on left"
        >
          Hover (Left)
        </button>
        <button
          data-content-trigger
          data-content-mode="tooltip"
          data-content-position="right"
          data-content-source="Tooltip on right"
        >
          Hover (Right)
        </button>
      </div>
    </div>

    <div class="demo-section">
      <h2>Popovers</h2>
      <div class="demo-grid">
        <button
          data-content-trigger
          data-content-mode="popover"
          data-content-position="top"
          data-content-source="<h4>Popover Title</h4><p>This is a popover with more detailed content.</p>"
        >
          Click (Top)
        </button>
        <button
          data-content-trigger
          data-content-mode="popover"
          data-content-position="bottom"
          data-content-source="<h4>Popover Title</h4><p>This is a popover with more detailed content.</p>"
        >
          Click (Bottom)
        </button>
      </div>
    </div>

    <div class="demo-section">
      <h2>Dropdown</h2>
      <div style="position: relative">
        <button
          data-content-trigger
          data-content-mode="dropdown"
          data-content-source="<div style='padding: 10px;'><p>Option 1</p><p>Option 2</p><p>Option 3</p></div>"
        >
          Open Dropdown
        </button>
      </div>
    </div>

    <div class="demo-section">
      <h2>Accordion</h2>
      <div id="accordion-group">
        <button
          data-content-trigger
          data-content-mode="accordion"
          data-content-target="accordion-group"
          data-content-source="<div style='padding: 15px;'><p>Content for section 1</p></div>"
        >
          Section 1
        </button>
        <button
          data-content-trigger
          data-content-mode="accordion"
          data-content-target="accordion-group"
          data-content-source="<div style='padding: 15px;'><p>Content for section 2</p></div>"
        >
          Section 2
        </button>
        <button
          data-content-trigger
          data-content-mode="accordion"
          data-content-target="accordion-group"
          data-content-source="<div style='padding: 15px;'><p>Content for section 3</p></div>"
        >
          Section 3
        </button>
      </div>
    </div>

    <div class="demo-section">
      <h2>Lightbox</h2>
      <div class="demo-grid">
        <div class="demo-card">
          <img
            src="https://dummyimage.com/200x150/111/fff.png"
            alt="placeholder"
            style="width: 200px; height: 150px; object-fit: cover"
          />
          <br />
          <button
            data-content-trigger
            data-content-mode="lightbox"
            data-content-source="https://dummyimage.com/800x600/111/fff.png"
          >
            Open in Lightbox
          </button>
        </div>
      </div>
    </div>

    <script src="../src/content-displayer.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const displayer = new ContentDisplayer({
          onContentShow: (container, trigger) => {
            console.log("Content shown:", container, trigger);
          },
          onContentHide: (container, trigger) => {
            console.log("Content hidden:", container, trigger);
          },
          onError: (error) => {
            console.error("Error:", error);
          },
        });

        // Force initial state check
        displayer.hideAllContent();
      });
    </script>
  </body>
</html>
